<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Consultorio M√©dico Salud Total</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f2f4f7;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    .container {
        background-color: #fff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        width: 360px;
        text-align: left;
    }
    h1 {
        text-align: center;
        color: #0078D7;
        margin-bottom: 10px;
    }
    label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
    }
    input, select {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        box-sizing: border-box;
    }
    button {
        width: 100%;
        background-color: #0078D7;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
    }
    button:hover {
        background-color: #005fa3;
    }
    .ticket {
        margin-top: 20px;
        padding-top: 15px;
        border-top: 2px dashed #aaa;
        white-space: pre-line;
        font-family: monospace;
        display: none;
    }
    .info {
        font-size: 14px;
        margin-bottom: 10px;
        color: #333;
    }
    .info b {
        color: #000;
    }
    #printBtn {
        background-color: #28a745;
        margin-top: 10px;
    }
    #printBtn:hover {
        background-color: #1e7e34;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Consultorio M√©dico Salud Total</h1>
    <div class="info">
        <b>Direcci√≥n:</b> Av. Libertad 123, Ciudad<br>
        <b>Tel√©fono:</b> (555) 123-4567
    </div>

    <form id="formTicket">
        <label for="paciente">Nombre del paciente:</label>
        <input type="text" id="paciente" required>

        <label for="especialidad">Especialidad:</label>
        <select id="especialidad" required>
            <option value="">Seleccione una especialidad</option>
            <option>Medicina General</option>
            <option>Pediatr√≠a</option>
            <option>Odontolog√≠a</option>
            <option>Dermatolog√≠a</option>
            <option>Cardiolog√≠a</option>
        </select>

        <label for="doctor">Nombre del m√©dico:</label>
        <input type="text" id="doctor" required>

        <button type="submit">Generar Ticket</button>
    </form>

    <div class="ticket" id="resultado"></div>
    <button id="printBtn" style="display:none;">üñ®Ô∏è Imprimir Ticket</button>
</div>

<script>
    // Cargar n√∫mero de ticket guardado o iniciar desde 1
    let numeroTicket = localStorage.getItem("numeroTicket");
    if (!numeroTicket) {
        numeroTicket = 1;
        localStorage.setItem("numeroTicket", numeroTicket);
    } else {
        numeroTicket = parseInt(numeroTicket);
    }

    document.getElementById("formTicket").addEventListener("submit", function(e) {
        e.preventDefault();

        const paciente = document.getElementById("paciente").value;
        const especialidad = document.getElementById("especialidad").value;
        const doctor = document.getElementById("doctor").value;
        const fecha = new Date().toLocaleString();

        // Generar n√∫mero de ticket con formato 3 d√≠gitos (001, 002...)
        const numeroFormateado = numeroTicket.toString().padStart(3, '0');

        const ticket = `
üè• CONSULTORIO M√âDICO SALUD TOTAL
----------------------------------------
Ticket N¬∫: ${numeroFormateado}
Fecha: ${fecha}
Paciente: ${paciente}
Especialidad: ${especialidad}
M√©dico: ${doctor}
----------------------------------------
Por favor, espere a ser llamado.
¬°Gracias por su preferencia!
`;

        const div = document.getElementById("resultado");
        div.textContent = ticket;
        div.style.display = "block";

        const printBtn = document.getElementById("printBtn");
        printBtn.style.display = "block";

        // Incrementar n√∫mero de ticket y guardar
        numeroTicket++;
        localStorage.setItem("numeroTicket", numeroTicket);

        // Al presionar el bot√≥n, imprime solo el ticket
        printBtn.onclick = function() {
            const contenido = div.textContent;
            const ventana = window.open('', '', 'width=400,height=600');
            ventana.document.write('<pre>' + contenido + '</pre>');
            ventana.document.close();
            ventana.print();
        };
    });
</script>

</body>
</html>
